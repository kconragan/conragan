---
// src/components/DiveChart.astro
interface DiveProfilePoint {
  time: number;
  depth: number;
  temp: number | null;
  pressure: number | null;
}

interface Props {
  post: {
    dive_profile: DiveProfilePoint[];
  }
}

const { post } = Astro.props;
const profileData = post.dive_profile;
---

<div class="astro-dive-chart">
  <div class="chart-container relative">
    <canvas 
      class="dive-chart-canvas"
      data-profile={JSON.stringify(profileData)}
    ></canvas>
  </div>

  <div class="chart-controls mt-4 text-center">
      <div class="unit-toggle">
          <button data-unit="metric" class="active">Metric</button>
          <button data-unit="imperial">Imperial</button>
      </div>
      <button class="download-btn">
          Download Chart
      </button>
  </div>
</div>


<script>
  import "/src/scripts/diveChartInitializer.js";
</script>
